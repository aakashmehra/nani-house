{% extends "base.html" %}
{% block title %}Nani House - Game{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/board.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/game.css') }}">
{% endblock %}
{% block content %}
<div class="game-container">

    <!-- Settings Button (top-left) -->
    <div class="settings-btn">
        <img id="openSettings" src="{{ url_for('static', filename='img/buttons/settings_button.webp') }}" alt="Settings" height="50">
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal hidden">
        <div class="settings-popup">
            <img src="{{ url_for('static', filename='img/background/popup.webp') }}" alt="popup" class="popup-bg">
            <div class="popup-content">
                <div class="popup-title">SETTINGS</div>
                <button id="closeSettings" class="close-button">
                    <img src="{{ url_for('static', filename='img/buttons/cancel_button.webp') }}" alt="close" height="30">
                </button>
                <div class="settings-content">
                    <button id="exitGameBtn" class="exit-button">
                        <img src="{{ url_for('static', filename='img/buttons/button_primary.webp') }}" alt="exit" class="exit-button-bg">
                        <span class="exit-button-text">Exit Game</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="game-info">
        <div id="turnIndicator" class="turn-indicator"></div>
    </div>
    <!-- Flash Message Popup -->
    <div id="flashMessage" class="flash-message hidden">
        <div class="flash-message-content">
            <span id="flashMessageText"></span>
        </div>
    </div>
    <!-- 10x10 Board -->
    <div class="board-wrap">

        <div id="board" class="board" aria-hidden="true">
            {% for r in range(10) %}
                {% for c in range(10) %}
                    <div class="cell" data-row="{{ r }}" data-col="{{ c }}"></div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>
    <div class = "health-bar">
        <div id="health-fill"></div>
    </div>
    <!-- Game Action Buttons (Right Side) -->
    <div id="gameActionButtons" class="game-action-buttons hidden">
        <button id="rollBtn" class="game-action-btn">
            <img src="{{ url_for('static', filename='img/buttons/button_primary.webp') }}" alt="Roll" class="game-action-btn-img">
            <span class="game-action-btn-text">Roll</span>
        </button>
        <button id="attackBtn" class="game-action-btn">
            <img src="{{ url_for('static', filename='img/buttons/button_primary.webp') }}" alt="Attack" class="game-action-btn-img">
            <span class="game-action-btn-text">Attack</span>
        </button>
        <button id="itemsBtn" class="game-action-btn">
            <img src="{{ url_for('static', filename='img/buttons/button_primary.webp') }}" alt="Items" class="game-action-btn-img">
            <span class="game-action-btn-text">Items</span>
        </button>
        <button id="abilityBtn" class="game-action-btn">
            <img src="{{ url_for('static', filename='img/buttons/button_primary.webp') }}" alt="Ability" class="game-action-btn-img">
            <span class="game-action-btn-text">Ability</span>
        </button>
    </div>
    <!-- Bottom Right Roll Display (for all players' rolls) -->
    <div class="roll-display-container">
        <div class="roll-display-content">
            <div id="rollPlayerName" class="roll-display-name hidden"></div>
            <div id="rollPlayerValue" class="roll-display-value hidden"></div>
        </div>
    </div>
</div>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
    // Set window variables for game.js
    window.AUTH_USER_ID = {% if AUTH_USER_ID %}{{ AUTH_USER_ID }}{% else %}null{% endif %};
    window.MATCH_ID = {% if MATCH_ID %}"{{ MATCH_ID }}"{% else %}null{% endif %};
    window.EXIT_GAME_URL = "{{ url_for('exit_game') }}";
    window.CREATE_HOUSE_URL = "{{ url_for('create_house') }}";
</script>
<script src="{{ url_for('static', filename='js/game.js') }}"></script>

{% endblock %}


